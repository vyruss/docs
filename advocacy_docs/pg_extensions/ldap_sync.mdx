---
title: LDAP sync
---

LDAP-sync is a collection of tools that enable the synchronization of account information and authentication from LDAP or Active Directory servers to EDB Postgres Advanced Server.

## Installing LDAP sync



## Configuring LDAP sync

Sample configuration files can be found at `/usr/lib/python3.6/site-packages/ldap_sync/samples/`. 

### Prerequisites

For the LDAP credentials sync to work, the following needs to be configured:

- `ldap2pg` for sync configuration

- `pg_hba.conf` to set up Postgres authentication against the LDAP server

- `pgagent` to set up periodic sync tasks

#### pgAgent

`edb-pgagent.conf_tmpl` is the default configuration for the pgAgent setup. Copy it into the configuration directory for pgAgent for EDB Postgres Advanced Server 14 at `/etc/sysconfig/edb/pgagent/14/pgagent-14.conf`. 

#### ldap2pg

`ldap2pg` is a PostgreSQL tool and access control list (ACL) management tool. The default location of `ldap2pg.yml` is in the `/etc/` folder. 

This tool can be installed with the following command: 

```shell
yum install python3-ldap2pg
``` 

[Where to add this?]

In order for synchronization to work the following sections need to be set in the configuration file:

- `ldap` &mdash; ldap authentication string

- `postgres` &mdash; postgres authentication string and schema/query configuration

- `sync_map` &mdash; user permission mapping

#### LDAP

##### OpenLDAP configuration

LDAP configuration requires a LDAP server url and port for the servers that allow anonymous connections. For the servers that need authentication, provide the `password` and `binddn` query. To perform user lookup, `binddn` must have permission. 

Enter the LDAP port (the default is 389):

```text
ldap:
  uri: ldap://ldap:389
```
##### Active directory configuration

Active directory setup requires a `binddn`, `password`, and `uri` with permissions to read user information. 

```text
ldap:
  binddn: cn=ldap2pg,ou=postgresql,dc=edb,dc=com
  password: EDBad32
  uri: ldap://10.100.20.21:389
```




